query Viewer {
  viewer {
    id
    name
    email
  }
}

query ListMyIssues($first: Int!, $after: String, $filter: IssueFilter) {
  viewer {
    assignedIssues(first: $first, after: $after, filter: $filter) {
      nodes {
        id
        identifier
        title
        state {
          name
          type
        }
        priority
        createdAt
        updatedAt
        dueDate
        estimate
        assignee {
          name
        }
        cycle {
          number
          name
        }
        project {
          name
        }
        labels {
          nodes {
            name
          }
        }
      }
      pageInfo {
        hasNextPage
        endCursor
      }
    }
  }
}

query GetIssue($id: String!) {
  issue(id: $id) {
    id
    identifier
    title
    description
    url
    priority
    estimate
    dueDate
    createdAt
    updatedAt
    branchName
    state {
      name
      type
    }
    assignee {
      name
      email
    }
    team {
      name
      key
    }
    cycle {
      number
      name
      startsAt
      endsAt
    }
    project {
      name
    }
    labels {
      nodes {
        name
      }
    }
    parent {
      identifier
      title
    }
  }
}

query ActiveIssuesForCompletion($first: Int!) {
  viewer {
    assignedIssues(
      first: $first
      filter: { state: { type: { nin: ["completed", "canceled"] } } }
    ) {
      nodes {
        identifier
        title
        state {
          name
          type
        }
        priority
      }
    }
  }
}

query ListIssues($first: Int!, $after: String, $filter: IssueFilter) {
  issues(first: $first, after: $after, filter: $filter) {
    nodes {
      id
      identifier
      title
      state {
        name
        type
      }
      priority
      createdAt
      updatedAt
      dueDate
      estimate
      assignee {
        name
      }
      cycle {
        number
        name
      }
      project {
        name
      }
      labels {
        nodes {
          name
        }
      }
    }
    pageInfo {
      hasNextPage
      endCursor
    }
  }
}

query UserIssuesForCompletion($first: Int!, $assigneeName: String!) {
  issues(
    first: $first
    filter: {
      assignee: { displayName: { eqIgnoreCase: $assigneeName } }
      state: { type: { nin: ["completed", "canceled"] } }
    }
  ) {
    nodes {
      identifier
      title
      state {
        name
        type
      }
      priority
    }
  }
}

query AllActiveIssuesForCompletion($first: Int!) {
  issues(
    first: $first
    filter: {
      state: { type: { nin: ["completed", "canceled"] } }
    }
  ) {
    nodes {
      identifier
      title
      state {
        name
        type
      }
      priority
    }
  }
}

query ListCycles($first: Int!) {
  cycles(first: $first, orderBy: createdAt) {
    nodes {
      id
      number
      name
      startsAt
      endsAt
      isActive
      isFuture
      isNext
      isPast
      isPrevious
    }
  }
}


query ListLabels($first: Int!) {
  issueLabels(first: $first, orderBy: updatedAt) {
    nodes {
      id
      name
    }
  }
}

query UsersForCompletion($first: Int!) {
  users(first: $first) {
    nodes {
      id
      name
      displayName
    }
  }
}

query ListUsers($first: Int!, $after: String) {
  users(first: $first, after: $after) {
    nodes {
      id
      name
      displayName
      email
      active
      admin
      isMe
    }
    pageInfo {
      hasNextPage
      endCursor
    }
  }
}

mutation UpdateIssueCycle($id: String!, $cycleId: String!) {
  issueUpdate(id: $id, input: { cycleId: $cycleId }) {
    success
    issue {
      id
      identifier
      title
    }
  }
}

query GetUserByDisplayName($displayName: String!) {
  users(
    first: 1
    filter: { displayName: { eqIgnoreCase: $displayName } }
  ) {
    nodes {
      id
      name
      displayName
      email
      active
      admin
      isMe
    }
  }
}
