query Viewer {
  viewer {
    id
    name
    email
  }
}

query ListMyActiveIssues($first: Int!, $after: String) {
  viewer {
    assignedIssues(
      first: $first
      after: $after
      filter: { state: { type: { nin: ["completed", "canceled"] } } }
    ) {
      nodes {
        id
        identifier
        title
        state {
          name
          type
        }
        priority
        updatedAt
        labels {
          nodes {
            name
          }
        }
      }
      pageInfo {
        hasNextPage
        endCursor
      }
    }
  }
}

query ListMyAllIssues($first: Int!, $after: String) {
  viewer {
    assignedIssues(first: $first, after: $after) {
      nodes {
        id
        identifier
        title
        state {
          name
          type
        }
        priority
        updatedAt
        labels {
          nodes {
            name
          }
        }
      }
      pageInfo {
        hasNextPage
        endCursor
      }
    }
  }
}

query GetIssue($id: String!) {
  issue(id: $id) {
    id
    identifier
    title
    description
    url
    priority
    estimate
    dueDate
    createdAt
    updatedAt
    branchName
    state {
      name
      type
    }
    assignee {
      name
      email
    }
    team {
      name
      key
    }
    project {
      name
    }
    labels {
      nodes {
        name
      }
    }
    parent {
      identifier
      title
    }
  }
}

query ActiveIssuesForCompletion($first: Int!) {
  viewer {
    assignedIssues(
      first: $first
      filter: { state: { type: { nin: ["completed", "canceled"] } } }
    ) {
      nodes {
        identifier
        title
        state {
          name
          type
        }
        priority
      }
    }
  }
}

query ListUserIssues($first: Int!, $after: String, $assigneeName: String!) {
  issues(
    first: $first
    after: $after
    filter: {
      assignee: { displayName: { eqIgnoreCase: $assigneeName } }
      state: { type: { nin: ["completed", "canceled"] } }
    }
  ) {
    nodes {
      id
      identifier
      title
      state {
        name
        type
      }
      priority
      updatedAt
      labels {
        nodes {
          name
        }
      }
    }
    pageInfo {
      hasNextPage
      endCursor
    }
  }
}

query ListAllUserIssues($first: Int!, $after: String, $assigneeName: String!) {
  issues(
    first: $first
    after: $after
    filter: {
      assignee: { displayName: { eqIgnoreCase: $assigneeName } }
    }
  ) {
    nodes {
      id
      identifier
      title
      state {
        name
        type
      }
      priority
      updatedAt
      labels {
        nodes {
          name
        }
      }
    }
    pageInfo {
      hasNextPage
      endCursor
    }
  }
}

query UserIssuesForCompletion($first: Int!, $assigneeName: String!) {
  issues(
    first: $first
    filter: {
      assignee: { displayName: { eqIgnoreCase: $assigneeName } }
      state: { type: { nin: ["completed", "canceled"] } }
    }
  ) {
    nodes {
      identifier
      title
      state {
        name
        type
      }
      priority
    }
  }
}

query ListCycles($first: Int!) {
  cycles(first: $first, orderBy: createdAt) {
    nodes {
      id
      number
      name
      startsAt
      endsAt
      isActive
      isFuture
      isNext
      isPast
      isPrevious
    }
  }
}

query ListMyActiveIssuesByCycle($first: Int!, $after: String, $cycleNumber: Float!) {
  viewer {
    assignedIssues(
      first: $first
      after: $after
      filter: {
        state: { type: { nin: ["completed", "canceled"] } }
        cycle: { number: { eq: $cycleNumber } }
      }
    ) {
      nodes {
        id
        identifier
        title
        state {
          name
          type
        }
        priority
        updatedAt
        labels {
          nodes {
            name
          }
        }
      }
      pageInfo {
        hasNextPage
        endCursor
      }
    }
  }
}

query ListMyAllIssuesByCycle($first: Int!, $after: String, $cycleNumber: Float!) {
  viewer {
    assignedIssues(
      first: $first
      after: $after
      filter: { cycle: { number: { eq: $cycleNumber } } }
    ) {
      nodes {
        id
        identifier
        title
        state {
          name
          type
        }
        priority
        updatedAt
        labels {
          nodes {
            name
          }
        }
      }
      pageInfo {
        hasNextPage
        endCursor
      }
    }
  }
}

query ListUserIssuesByCycle($first: Int!, $after: String, $assigneeName: String!, $cycleNumber: Float!) {
  issues(
    first: $first
    after: $after
    filter: {
      assignee: { displayName: { eqIgnoreCase: $assigneeName } }
      state: { type: { nin: ["completed", "canceled"] } }
      cycle: { number: { eq: $cycleNumber } }
    }
  ) {
    nodes {
      id
      identifier
      title
      state {
        name
        type
      }
      priority
      updatedAt
      labels {
        nodes {
          name
        }
      }
    }
    pageInfo {
      hasNextPage
      endCursor
    }
  }
}

query ListAllUserIssuesByCycle($first: Int!, $after: String, $assigneeName: String!, $cycleNumber: Float!) {
  issues(
    first: $first
    after: $after
    filter: {
      assignee: { displayName: { eqIgnoreCase: $assigneeName } }
      cycle: { number: { eq: $cycleNumber } }
    }
  ) {
    nodes {
      id
      identifier
      title
      state {
        name
        type
      }
      priority
      updatedAt
      labels {
        nodes {
          name
        }
      }
    }
    pageInfo {
      hasNextPage
      endCursor
    }
  }
}

query UsersForCompletion($first: Int!) {
  users(first: $first) {
    nodes {
      id
      name
      displayName
    }
  }
}

query ListUsers($first: Int!, $after: String) {
  users(first: $first, after: $after) {
    nodes {
      id
      name
      displayName
      email
      active
      admin
      isMe
    }
    pageInfo {
      hasNextPage
      endCursor
    }
  }
}

query GetUserByDisplayName($displayName: String!) {
  users(
    first: 1
    filter: { displayName: { eqIgnoreCase: $displayName } }
  ) {
    nodes {
      id
      name
      displayName
      email
      active
      admin
      isMe
    }
  }
}
